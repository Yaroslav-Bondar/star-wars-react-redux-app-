{"ast":null,"code":"var _jsxFileName = \"/home/yaroslav/develop/web/apps/React/react-app/src/containers/PeoplePage/PeoplePage.jsx\",\n    _s = $RefreshSig$();\n\nimport { useState, useEffect } from 'react'; // checking type of props https://github.com/facebook/prop-types \n\nimport PropTypes from 'prop-types';\nimport { withErrorApi } from '../../hoc-helpers/withErrorApi';\nimport PeopleList from '../../components/PeoplePage/PeopleList';\nimport PeopleNavigation from '../../components/PeoplePage/PeopleNavigation';\nimport { getApiResource, changeHTTP } from '../../utils/network';\nimport { useQueryParams } from '../../hooks/useQueryParams';\nimport { getPeopleId, getPeopleImage, getPeoplePageId } from '../../services/getPeopleData';\nimport { API_PEOPLE, SWAPI_PEOPLE } from '../../constants/api';\nimport styles from './PeoplePage.module.css';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nconsole.log(API_PEOPLE);\n\nconst PeoplePage = _ref => {\n  _s();\n\n  let {\n    setErrorApi\n  } = _ref;\n  const [people, setPeople] = useState(null);\n  const [prevPage, setPrevPage] = useState(null);\n  const [nextPage, setNextPage] = useState(null);\n  const [counterPage, setCounterPage] = useState(1); // console.log(useQueryParams().toString());\n  // console.log(useQueryParams().get('page'));\n\n  const queryPage = useQueryParams().get('page'); // console.log(queryPage, nextPage, prevPage);\n\n  const getResource = async url => {\n    const data = await getApiResource(url);\n    console.log(data); // if the data does not contain an error\n\n    if (true !== data instanceof Error) {\n      try {\n        const peopleList = data.results.map(_ref2 => {\n          let {\n            name,\n            url\n          } = _ref2;\n          const id = getPeopleId(url, SWAPI_PEOPLE);\n          const img = getPeopleImage(id);\n          return {\n            id,\n            name,\n            img\n          };\n        });\n        setPeople(peopleList);\n        setNextPage(changeHTTP(data.next));\n        setPrevPage(changeHTTP(data.previous)); // console.log(people);\n\n        setCounterPage(getPeoplePageId(url));\n        setErrorApi(false);\n      } catch (error) {\n        setErrorApi(error);\n      }\n    } // if the data contains an error \n    else {\n      console.log(people); // call to display error (higher-order component withErrorApi)\n\n      setErrorApi(data);\n    }\n  };\n\n  useEffect(() => {\n    console.log('useEffect');\n    getResource(API_PEOPLE + queryPage); // getResource('https://swapi.dev/api/people/?page=2');\n  }, [queryPage]);\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: [\"PeoplePage\", /*#__PURE__*/_jsxDEV(PeopleNavigation, {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 63,\n      columnNumber: 13\n    }, this), people && /*#__PURE__*/_jsxDEV(PeopleList, {\n      people: people\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 64,\n      columnNumber: 25\n    }, this)]\n  }, void 0, true);\n};\n\n_s(PeoplePage, \"5sHCbOjSlh4TmbbXdV23d0S6Oy8=\", false, function () {\n  return [useQueryParams];\n});\n\n_c = PeoplePage;\nPeoplePage.propTypes = {\n  setErrorApi: PropTypes.func\n};\nexport default _c2 = withErrorApi(PeoplePage);\n\nvar _c, _c2;\n\n$RefreshReg$(_c, \"PeoplePage\");\n$RefreshReg$(_c2, \"%default%\");","map":{"version":3,"sources":["/home/yaroslav/develop/web/apps/React/react-app/src/containers/PeoplePage/PeoplePage.jsx"],"names":["useState","useEffect","PropTypes","withErrorApi","PeopleList","PeopleNavigation","getApiResource","changeHTTP","useQueryParams","getPeopleId","getPeopleImage","getPeoplePageId","API_PEOPLE","SWAPI_PEOPLE","styles","console","log","PeoplePage","setErrorApi","people","setPeople","prevPage","setPrevPage","nextPage","setNextPage","counterPage","setCounterPage","queryPage","get","getResource","url","data","Error","peopleList","results","map","name","id","img","next","previous","error","propTypes","func"],"mappings":"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","sourcesContent":["import { useState, useEffect } from 'react';\n// checking type of props https://github.com/facebook/prop-types \nimport PropTypes from 'prop-types';\nimport { withErrorApi } from '../../hoc-helpers/withErrorApi';\nimport PeopleList from '../../components/PeoplePage/PeopleList';\nimport PeopleNavigation from '../../components/PeoplePage/PeopleNavigation';\nimport { getApiResource, changeHTTP } from '../../utils/network';\nimport {useQueryParams} from '../../hooks/useQueryParams';\nimport { getPeopleId, getPeopleImage, getPeoplePageId } from '../../services/getPeopleData';\nimport { API_PEOPLE, SWAPI_PEOPLE } from '../../constants/api';\nimport styles from './PeoplePage.module.css';\n\nconsole.log(API_PEOPLE);\nconst PeoplePage = ({setErrorApi}) => {\n    const [people, setPeople] = useState(null);\n    const [prevPage, setPrevPage] = useState(null);\n    const [nextPage, setNextPage] = useState(null);\n    const [counterPage, setCounterPage] = useState(1);\n\n    // console.log(useQueryParams().toString());\n    // console.log(useQueryParams().get('page'));\n    const queryPage = useQueryParams().get('page')\n    // console.log(queryPage, nextPage, prevPage);\n    const getResource = async (url) => {\n        const data = await getApiResource(url);\n        console.log(data);\n        // if the data does not contain an error\n        if(true !== data instanceof Error) {\n        try {\n            const peopleList = data.results.map(({name, url}) => {\n                const id = getPeopleId(url, SWAPI_PEOPLE);\n                const img = getPeopleImage(id);\n                return {\n                    id,\n                    name,\n                    img,\n                }\n            });\n            setPeople(peopleList);\n            setNextPage(changeHTTP(data.next));\n            setPrevPage(changeHTTP(data.previous));\n            // console.log(people);\n            setCounterPage(getPeoplePageId(url));\n            setErrorApi(false);\n            }\n            catch(error) {\n                setErrorApi(error);\n            }\n        } // if the data contains an error \n        else {\n            console.log(people);\n            // call to display error (higher-order component withErrorApi)\n            setErrorApi(data);  \n        }\n    };\n    useEffect(()=> {\n        console.log('useEffect');\n        getResource(API_PEOPLE + queryPage);\n        // getResource('https://swapi.dev/api/people/?page=2');\n    },[queryPage]);\n    return (\n        <>PeoplePage\n            <PeopleNavigation/>\n            { people && <PeopleList people = {people}/> }\n        </>\n    );\n}\n\nPeoplePage.propTypes = {\n    setErrorApi: PropTypes.func,\n}\n\nexport default withErrorApi(PeoplePage);\n\n      "]},"metadata":{},"sourceType":"module"}